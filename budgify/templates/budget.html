{% extends "base.html" %} {% block title %}Budgify | {{ budget.name }} {% endblock %} {%
block content %}

<h2>{{ budget.name|title }}</h2>

{% with messages = get_flashed_messages() %} {% if messages %}
<ul class="flashes">
  {% for message in messages %}
  <li class="text-center text-primary fw-medium p-0">{{ message }}</li>
  {% endfor %}
</ul>
{% endif %} {% endwith %}

<!-- Budget Management Section -->
<section>
  <div class="card col-12 col-md-8 mx-auto my-3">
    <div class="card-body">
      <h5 class="card-title">Budget Management</h5>
      <p class="card-text">Make changes to your budget with ease using the buttons below. You can add a new transaction, update your budget's name, or remove the budget entirely. You can also edit or delete any of the transactions below by clicking on them.</p>
      <div class="text-center">
        <a href="#" class="btn btn-success mb-2">Add Transaction</a>
        <a href="#" class="btn btn-primary mb-2" data-bs-toggle="modal"
        data-bs-target="#rename-budget-{{ budget.id }}">Rename Budget</a>
        <a href="#" class="btn btn-danger mb-2" data-bs-toggle="modal"
        data-bs-target="#delete-budget-{{ budget.id }}">Delete Budget</a>
      </div>
    </div>
  </div>
</section>

<!-- Budget Table Section -->
<section class="col-12 col-md-8 mx-auto">
  <table class="table table-hover">
    <!-- Income Section -->
    <thead>
      <tr>
        <th class="section-head" colspan="3">Income</th>
      </tr>
    </thead>
    <thead class="table-group-divider">
      <tr>
        <th>Description</th>
        <th>Amount</th>
        <th>Day</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Salary</td>
        <td>5000</td>
        <td>1st</td>
      </tr>
    </tbody>
    <!-- Mortgage or Rent Section -->
    <thead>
      <tr>
        <th class="section-head" colspan="3">Mortgage or Rent</th>
      </tr>
    </thead>
    <thead class="table-group-divider">
      <tr>
        <th>Description</th>
        <th>Amount</th>
        <th>Day</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Salary</td>
        <td>5000</td>
        <td>1st</td>
      </tr>
    </tbody>
    <!-- Utilities & Council Tax -->
    <thead>
      <tr>
        <th class="section-head" colspan="3">
          Utilities & Council tax (gas, electric etc.)
        </th>
      </tr>
    </thead>
    <thead class="table-group-divider">
      <tr>
        <th>Description</th>
        <th>Amount</th>
        <th>Day</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Salary</td>
        <td>5000</td>
        <td>1st</td>
      </tr>
    </tbody>
    <!-- Transport Section -->
    <thead>
      <tr>
        <th class="section-head" colspan="3">
          Transport (fuel, road tax, bus fares etc.)
        </th>
      </tr>
    </thead>
    <thead class="table-group-divider">
      <tr>
        <th>Description</th>
        <th>Amount</th>
        <th>Day</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Salary</td>
        <td>5000</td>
        <td>1st</td>
      </tr>
    </tbody>
    <!-- Unsecured Debt Section -->
    <thead>
      <tr>
        <th class="section-head" colspan="3">
          Unsecured debt (loans, credit cards, overdrafts etc.)
        </th>
      </tr>
    </thead>
    <thead class="table-group-divider">
      <tr>
        <th>Description</th>
        <th>Amount</th>
        <th>Day</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Salary</td>
        <td>5000</td>
        <td>1st</td>
      </tr>
    </tbody>
    <!-- Communications Section -->
    <thead>
      <tr>
        <th class="section-head" colspan="3">
          Communications (telephone, broadband etc.)
        </th>
      </tr>
    </thead>
    <thead class="table-group-divider">
      <tr>
        <th>Description</th>
        <th>Amount</th>
        <th>Day</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Salary</td>
        <td>5000</td>
        <td>1st</td>
      </tr>
    </tbody>
    <!-- Insurance Section -->
    <thead>
      <tr>
        <th class="section-head" colspan="3">
          Insurances (home, life, gadget cover etc.)
        </th>
      </tr>
    </thead>
    <thead class="table-group-divider">
      <tr>
        <th>Description</th>
        <th>Amount</th>
        <th>Day</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Salary</td>
        <td>5000</td>
        <td>1st</td>
      </tr>
    </tbody>
    <!-- Childcare Section -->
    <thead>
      <tr>
        <th class="section-head" colspan="3">Childcare & school fees</th>
      </tr>
    </thead>
    <thead class="table-group-divider">
      <tr>
        <th>Description</th>
        <th>Amount</th>
        <th>Day</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Salary</td>
        <td>5000</td>
        <td>1st</td>
      </tr>
    </tbody>
    <!-- Shopping Section -->
    <thead>
      <tr>
        <th class="section-head" colspan="3">Shopping</th>
      </tr>
    </thead>
    <thead class="table-group-divider">
      <tr>
        <th>Description</th>
        <th>Amount</th>
        <th>Day</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Salary</td>
        <td>5000</td>
        <td>1st</td>
      </tr>
    </tbody>
    <!-- Savings Section -->
    <thead>
      <tr>
        <th class="section-head" colspan="3">
          Savings and Investments (cash, pensions, ISAs etc.)
        </th>
      </tr>
    </thead>
    <thead class="table-group-divider">
      <tr>
        <th>Description</th>
        <th>Amount</th>
        <th>Day</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Salary</td>
        <td>5000</td>
        <td>1st</td>
      </tr>
    </tbody>
    <!-- Other Section -->
    <thead>
      <tr>
        <th class="section-head" colspan="3">
          Other (hobbies, entertainment, holidays etc.)
        </th>
      </tr>
    </thead>
    <thead class="table-group-divider">
      <tr>
        <th>Description</th>
        <th>Amount</th>
        <th>Day</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Salary</td>
        <td>5000</td>
        <td>1st</td>
      </tr>
    </tbody>
    <!-- Totals Section -->
    <thead>
      <tr>
        <th class="section-head" colspan="3">
          Totals
        </th>
      </tr>
    </thead>
    <thead class="table-group-divider">
      <tr>
        <th>Total In</th>
        <th>Total Out</th>
        <th>Difference</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>0</td>
        <td>0</td>
        <td>0</td>
      </tr>
    </tbody>
  </table>
</section>

<!-- Modals -->
<!-- Rename Budget Modal -->
<div
  class="modal fade"
  id="rename-budget-{{ budget.id }}"
  tabindex="-1"
  aria-labelledby="rename-budget-modal-label"
  aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title fs-5 mx-auto" id="rename-budget-modal-label">Choose a new name for your budget...</h2>
      </div>
      <div class="modal-body text-center">
        <form method="POST" action="{{ url_for('rename_budget', username=session.user, budget_id=budget.id) }}">
          <input
            name="budget_name"
            id="budget_name"
            type="text"
            class="validate form-control"
            minlength="1"
            maxlength="50"
            required />
            <div id="budget-name-help" class="form-text text-start mb-3">
              Maximum of 50 characters.
            </div>
            <button type="submit" class="btn btn-primary add-budget-btn mb-2">Rename Budget</button>
            <button type="button" class="btn btn-secondary add-budget-btn mb-2" data-bs-dismiss="modal">
              Cancel
            </button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Delete Budget Modal -->
<div
  class="modal fade"
  id="delete-budget-{{ budget.id }}"
  tabindex="-1"
  aria-labelledby="delete-budget-modal-label"
  aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title fs-5 mx-auto" id="delete-budget-modal-label">Warning!</h2>
      </div>
      <div class="modal-body text-center">
        <p>Are you sure you want to delete this budget and ALL associated transactions?</p>
        <form method="POST" action="{{ url_for('delete_budget', username=session.user, budget_id=budget.id) }}">
          <button type="button" class="btn btn-primary add-budget-btn mb-2" data-bs-dismiss="modal">
            No! Take me back!
          </button>  
          <button type="submit" class="btn btn-danger add-budget-btn mb-2">Yes, delete it!</button>
        </form>
      </div>
    </div>
  </div>
</div>


{% endblock %}
